%%=============================================================================
%% Projections
%%=============================================================================

\section{Projections}
\label{sec:projections}

Projections zijn een projectie van de huidige staat die berekend is van alle voorbijgaande events. Bij een systeem waar er met een relationele databank wordt gewerkt, is de databank zelf de projectie. Met als grote verschil dat daar ook de databank de enige echte bron van waarheid is. Dat is niet het geval bij een systeem met EventSourcing, daar is de bron van waarheid de events die opgeslagen zijn.

Projections hebben het voordeel dat er meerdere kunnen zijn. Er kan een databank gegenereerd worden voor de business kant die dan allerlei statistieken kan bekijken. Er kan ook een databank gegenereerd worden voor werknemers die met een bepaalde applicatie werken. Er kan zelf een databank of ander opslagsysteem gevuld worden los van de huidige databanken voor de andere partijen. Op deze manier zijn het systeem en de databank losgekoppeld van elkaar en dit door de flexiebele projecties. 

Deze projecties zijn een berekening van de events, dit wilt ook zeggen dat er niet geoptimaliseert moet worden voor de schrijfkant (Hoofdstuk~\ref{ch:CQRS}). Er kan geoptimaliseerd worden voor de leeskant, er is geen nood om een aantal tabellen elke keer te gaan joinen, als er rechtstreeks naar 1 tabel geschrijven wordt.

Om een wijziging te kunnen doen in een aggregate, moet eerst de huidige state opgebouwd worden vanuit de DomainEvents. Dit kan echter inefficiÃ«nt zijn wanneer er duizenden events beschikbaar zijn. Een projectie kan dan perfect dienen als een cache, om dit probleem op te lossen.